
<script>$('body').attr('id', 'index-page');</script>
<div class="section" id="cover-section">
  <div class="slick" id="cover-slick">
    <% @covers.each do |cover| %>
      <div>
        <div class="page-cover" style="background-image: url(<%= cover[:image] %>)">
          <div class="info">
            <div class="container">
              <div class="caption"><%= raw(cover[:caption]) %></div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
<div class="section" id="event-section">
  <div class="container">
    <ul class="nav nav-pills nav-daydash">
      <li class="active"><a href="#" onclick="return on_events_filter(this, {});">ALL</a></li>
      <% if @categories.size > 0 %>
        <% @categories.each do |category| %>
          <li>
            <a href="#" onclick="return on_events_filter(this, {category_id: '<%= category.id %>'});"><%= category.title %></a>
          </li>
        <% end %>
      <% end %>
    </ul>
    <div class="row event-list">
      <% @events.each do |event| %>
        <div class="col-sm-6 col-md-4 event-wrapper <% event.categories.each do |category| %> event-category-<%= category.id %><% end %>">
          <a class="event card" href="<%= client_event_path(event.to_url) %>">
            <div class="cover" style="background-image: url(<%= event.get_thumbnail %>);"></div>
            <div class="info">
              <h4 class="title text-left"><%= event.title %></h4>
              <div class="meta date"><i class="icon icon-xs icon-calendar"></i> <%= event.sections.first.event_time.strftime("%A %d %B, %H:%M") %></div>
              <div class="meta location"><i class="icon icon-xs icon-map-pin"></i> <%= event.location_name %></div>
            </div>
          </a>
        </div>
      <% end %>
    </div>
  </div>
</div>

<script type="text/javascript">
  var on_events_filter;

  on_events_filter = function(element, options) {
    var category_id;
    if (options['category_id'] !== void 0) {
      category_id = options['category_id'];
      $('#event-section .event-list .event-wrapper').not('.event-category-' + category_id).hide();
      $('#event-section .event-list .event-wrapper.event-category-' + category_id).show();
    } else {
      $('#event-section .event-list .event-wrapper').show();
    }
    $(element).parents('.nav').find('li').removeClass('active');
    $(element).parent().addClass('active');
    return false;
  };
</script>
