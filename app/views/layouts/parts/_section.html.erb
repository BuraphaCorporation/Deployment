<script> //Init Function
  function initDatetimepicker(element) {
    $('.datepicker', element).datetimepicker({
      format: 'DD/MM/YYYY'
    });

    $('.timepicker', element).datetimepicker({
      format: 'LT',
      stepping: 15
    });
  }

  function onTicketAdd(button) {
    var template = $('#new-ticket-template').html();
    Mustache.parse(template);
    var rendered = Mustache.render(template, {});
    var element = $(rendered);
    $('.ticket-list tbody').append(element);

    initDatetimepicker(element);

    return false;
  }

  function onTicketDelete(button) {
    var element = $(button).parents('.ticket');
    console.log(element);
    element.remove();

    return false;
  }
</script>

<!-- Template -->
<script id="new-ticket-template" type="x-tmpl-mustache">
  <tr class="ticket new-ticket">
    <td><input class="form-control" type="text" name="new_ticket_names[]" value="" placeholder="eg. General, VIP" /></td>
    <td><input class="form-control" type="number" name="new_ticket_totals[]" value="" /></td>
    <td><input class="form-control" type="number" name="new_ticket_prices[]" value="" /></td>
    <td width="200">
      <div class="input-group datepicker">
        <input type="text" class="form-control" name="new_ticket_dates[]" />
        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
      </div>
    </td>
    <td width="200">
      <div class="input-group timepicker">
        <input class="form-control" type="text" name="new_ticket_start_times[]" value="" />
        <span class="input-group-addon"><i class="fa fa-clock-o"></i></span>
      </div>
    <td width="200">
      <div class="input-group timepicker">
        <input class="form-control" type="text" name="new_ticket_end_times[]" value="" />
        <span class="input-group-addon"><i class="fa fa-clock-o"></i></span>
      </div>
    </td>

    <td width="100" align="right">
      <a class="btn btn-sm btn-default btn-ticket-delete" href="javasctipt:;" onclick="return onTicketDelete(this);"><i class="fa fa-minus"></i></a>
      <a class="btn btn-sm btn-default btn-ticket-add" href="javasctipt:;" onclick="return onTicketAdd(this);"><i class="fa fa-plus"></i></a>
    </td>
  </tr>
</script>
